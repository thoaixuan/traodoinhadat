<p style="margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Nếu bạn là một PHP Developer, chắc hẳn bạn đã rất quen thuộc với việc truy xuất Database (Cơ sở dữ liệu) bằng các extensions MySQL và MySQLi. Từ PHP 5.1 ta có một cách thức tối ưu hơn đó là sử dụng PHP Data Objects. PDO cung cấp các cơ chế Prepared Statements, Stored Procedures và giúp bạn thao tác với database thông qua các Object (đối tượng) làm cho công việc trở nên hiệu quả, dễ dàng hơn.</p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"><span style="font-weight: bolder;">So sánh PDO và MySQLi</span></p><table style="margin-bottom: 0px; margin-top: 1em; display: block; width: 730px; overflow: auto; color: rgb(41, 43, 44); font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 18px;"><thead><tr><th style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;"></th><th style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">PDO</th><th style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">MySQLi</th></tr></thead><tbody><tr><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Database hỗ trợ</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Hơn 12 loại</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Chỉ hỗ trợ MySQL</td></tr><tr><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">API</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Hướng đối tượng (OOP)</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Hướng đối tượng (OOP) - Hướng thủ tục (Procedural)</td></tr><tr><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Kết nối Database</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Dễ dàng</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Dễ dàng</td></tr><tr><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Đặt tên tham số</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Có</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Không</td></tr><tr><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Object Mapping</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Có</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Có</td></tr><tr><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Prepared Statements</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Có</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Không</td></tr><tr><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Hiệu năng</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Cao</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Cao</td></tr><tr><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Stored Procedures</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Có</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Có</td></tr></tbody></table><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"><span style="font-weight: bolder;">1. Giới thiệu PDO - PHP Data Objects</span></p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">PHP Data Objects (PDO) là một lớp truy xuất cơ sở dữ liệu cung cấp một phương pháp thống nhất để làm việc với nhiều loại cơ sở dữ liệu khác nhau. Khi làm việc với PDO bạn sẽ không cần phải viết các câu lệnh SQL cụ thể mà chỉ sử dụng các phương thức mà PDO cung cấp, giúp tiết kiệm thời gian và làm cho việc chuyển đổi Hệ quản trị cơ sở dữ liệu trở nên dễ dàng hơn, chỉ đơn giản là thay đổi Connection String (chuỗi kết nối CSDL).</p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Bạn chỉ cần nắm rõ API mà PDO cung cấp là có thể làm việc được với nhiều Hệ quản trị cơ sở dữ liệu khác nhau như MySQL, SQLite, PostgreSQL, Microsoft SQL Server,... và có thể dễ dàng chuyển đổi chúng.</p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Các Hệ quản trị cơ sở dữ liệu (Database Management System) mà PDO hỗ trợ gồm có:</p><table style="margin-bottom: 0px; margin-top: 1em; display: block; width: 730px; overflow: auto; color: rgb(41, 43, 44); font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 18px;"><thead><tr><th style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Tên driver</th><th style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">DBMS</th></tr></thead><tbody><tr><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">PDO_CUBRID</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Cubrid</td></tr><tr><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">PDO_DBLIB FreeTDS</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Microsoft SQL Server / Sybase</td></tr><tr><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">PDO_FIREBIRD</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Firebird</td></tr><tr><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">PDO_IBM</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">IBM DB2</td></tr><tr><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">PDO_INFORMIX</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">IBM Informix Dynamic Server</td></tr><tr><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">PDO_MYSQL</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">MySQL 3.x/4.x/5.x</td></tr><tr><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">PDO_OCI</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Oracle Call Interface</td></tr><tr><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">PDO_ODBC</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">ODBC v3 (IBM DB2, unixODBC and win32 ODBC)</td></tr><tr><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">PDO_PGSQL</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">PostgreSQL</td></tr><tr><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">PDO_SQLITE</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">SQLite 3 and SQLite 2</td></tr><tr><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">PDO_SQLSRV</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">Microsoft SQL Server / SQL Azure</td></tr><tr><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">PDO_4D</td><td style="border: 1px solid rgb(214, 214, 215); padding: 0.75rem; vertical-align: top;">4D</td></tr></tbody></table><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"><span style="font-weight: bolder;">2. Kết nối cơ sở dữ liệu</span></p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Mỗi DBMS sẽ có các phương thức kết nối khác nhau (có loại cần Username, Password, đường dẫn đới Database, Port, có loại không). Connection String của các DBMS phổ biến hầu hết đều có dạng như sau:</p><pre class="language-PHP" data-filename="" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; margin-top: 1em; margin-bottom: 1em; color: rgb(36, 41, 46); line-height: 1.45; direction: ltr; word-break: normal; tab-size: 4; hyphens: none; padding: 1em; background-color: rgb(241, 242, 243); border-radius: 3px; border: 1px solid rgb(229, 229, 229);"><code class="language-PHP" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; color: rgb(36, 41, 46); display: block; line-height: 1.45; direction: ltr; word-spacing: normal; tab-size: 4; hyphens: none;"><span class="token variable">$conn</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token keyword" style="color: rgb(215, 58, 73);">new</span> <span class="token class-name" style="color: rgb(111, 66, 193);">PDO</span><span class="token punctuation">(</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'mysql:host=localhost;dbname=izlearn'</span><span class="token punctuation">,</span> <span class="token variable">$username</span><span class="token punctuation">,</span> <span class="token variable">$password</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Với mysql là tên của DBMS, localhost có ý nghĩa database được đặt trên cùng server, izlearn là tên của database. $username và $password là 2 biến chứa thông tin xác thực.</p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Đối với SQLite, DBMS này không có cơ chế xác thực bằng Username và Password mà chỉ đơn giản là đường dẫn tới file dữ liệu:</p><pre class="language-PHP" data-filename="" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; margin-top: 1em; margin-bottom: 1em; color: rgb(36, 41, 46); line-height: 1.45; direction: ltr; word-break: normal; tab-size: 4; hyphens: none; padding: 1em; background-color: rgb(241, 242, 243); border-radius: 3px; border: 1px solid rgb(229, 229, 229);"><code class="language-PHP" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; color: rgb(36, 41, 46); display: block; line-height: 1.45; direction: ltr; word-spacing: normal; tab-size: 4; hyphens: none;"><span class="token variable">$conn</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token keyword" style="color: rgb(215, 58, 73);">new</span> <span class="token class-name" style="color: rgb(111, 66, 193);">PDO</span><span class="token punctuation">(</span><span class="token double-quoted-string string" style="color: rgb(3, 47, 98);">"sqlite:your/database/path/izlearn.db"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Đây là lúc để bạn quên đi Connection String lỗi thời mysql_connect('localhost', 'username', 'password') or die('Could not connect: ' . mysql_error()); Hiện vẫn còn rất nhiều bài viết ở Việt Nam hướng dẫn người mới sử dụng cách kết nối CSDL dạng này vì họ cho rằng nó đơn giản. Thực ra họ chỉ đang dẫn bạn đi về quá khứ mà thôi. Đế ngắt kết nối khi không cần thao tác với database nữa, các bạn chỉ cần sét biến $conn về null;</p><pre class="language-PHP" data-filename="" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; margin-top: 1em; margin-bottom: 1em; color: rgb(36, 41, 46); line-height: 1.45; direction: ltr; word-break: normal; tab-size: 4; hyphens: none; padding: 1em; background-color: rgb(241, 242, 243); border-radius: 3px; border: 1px solid rgb(229, 229, 229);"><code class="language-PHP" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; color: rgb(36, 41, 46); display: block; line-height: 1.45; direction: ltr; word-spacing: normal; tab-size: 4; hyphens: none;"><span class="token variable">$conn</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token constant">null</span><span class="token punctuation">;</span>
</code></pre><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"><span style="font-weight: bolder;">3. Insert và Update</span></p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Thêm mới (insert) và cập nhật (update) dữ liệu là những hoạt động cơ bản khi thao tác với database. Với PDO, mỗi hoạt động insert hay update được thực hiện qua 3 quá trình sử dụng cơ chế Prepared Statement</p><ul style="margin-bottom: 0px; margin-top: 1em; color: rgb(41, 43, 44); font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 18px;"><li style="font-size: 1em; word-break: break-word; overflow-wrap: break-word; margin-bottom: 0.5em;">Prepare statement: Chuẩn bị một câu lệnh SQL làm khung/mẫu được gọi là Prepared Statement với các Placeholder (có thể hiểu placeholder đóng vai trò như tham số của các phương thức khi bạn khai báo hàm)</li><li style="font-size: 1em; word-break: break-word; overflow-wrap: break-word; margin-bottom: 0.5em;">Bind params: Gắn giá trị thực vào các placeholder (tương tự như khi bạn truyền giá trị vào các tham số của phương thức)</li><li style="font-size: 1em; word-break: break-word; overflow-wrap: break-word; margin-bottom: 0.5em;">Execute: Thực thi câu lệnh.</li></ul><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"><span style="font-weight: bolder;">Prepared Statement</span></p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Có 2 loại Placeholder trong Prepared Statement là Placeholder không định danh (Unnamed Placeholder) và Placeholder định danh (Named Placeholder) như ví dụ sau:</p><pre class="language-PHP" data-filename="" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; margin-top: 1em; margin-bottom: 1em; color: rgb(36, 41, 46); line-height: 1.45; direction: ltr; word-break: normal; tab-size: 4; hyphens: none; padding: 1em; background-color: rgb(241, 242, 243); border-radius: 3px; border: 1px solid rgb(229, 229, 229);"><code class="language-PHP" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; color: rgb(36, 41, 46); display: block; line-height: 1.45; direction: ltr; word-spacing: normal; tab-size: 4; hyphens: none;"><span class="token variable">$stmt</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token variable">$conn</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">prepare</span><span class="token punctuation">(</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'INSERT INTO users (name, email, age) values (?, ?, ?)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$stmt</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token variable">$conn</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">prepare</span><span class="token punctuation">(</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'INSERT INTO users (name, email, age) values (:name, :mail, :age)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Dòng lệnh thứ nhất sử dụng Placeholder không định danh là các dấu hỏi - ?. Dòng lệnh thứ 2 sử dụng Placeholder định danh: :name, :mail, :age (lưu ý dấu hai chấm và placeholder không nhất thiết phải giống tên column). Sau đây là toàn bộ quá trình Insert và Update sử dụng 2 loại Placeholder nêu trên.</p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"><span style="font-weight: bolder;">Unnamed Placeholder</span></p><pre class="language-PHP" data-filename="" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; margin-top: 1em; margin-bottom: 1em; color: rgb(36, 41, 46); line-height: 1.45; direction: ltr; word-break: normal; tab-size: 4; hyphens: none; padding: 1em; background-color: rgb(241, 242, 243); border-radius: 3px; border: 1px solid rgb(229, 229, 229);"><code class="language-PHP" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; color: rgb(36, 41, 46); display: block; line-height: 1.45; direction: ltr; word-spacing: normal; tab-size: 4; hyphens: none;"><span class="token comment" style="color: rgb(106, 115, 125);">//Khởi tạo Prepared Statement từ biến $conn ở phần trước</span>
<span class="token variable">$stmt</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token variable">$conn</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">prepare</span><span class="token punctuation">(</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'INSERT INTO users (name, email, age) values (?, ?, ?)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" style="color: rgb(106, 115, 125);">//Gán các biến (lúc này chưa mang giá trị) vào các placeholder theo thứ tự tương ứng</span>
<span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">bindParam</span><span class="token punctuation">(</span><span class="token number" style="color: rgb(0, 92, 197);">1</span><span class="token punctuation">,</span> <span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">bindParam</span><span class="token punctuation">(</span><span class="token number" style="color: rgb(0, 92, 197);">2</span><span class="token punctuation">,</span> <span class="token variable">$mail</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">bindParam</span><span class="token punctuation">(</span><span class="token number" style="color: rgb(0, 92, 197);">3</span><span class="token punctuation">,</span> <span class="token variable">$age</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" style="color: rgb(106, 115, 125);">//Gán giá trị và thực thi</span>
<span class="token variable">$name</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token double-quoted-string string" style="color: rgb(3, 47, 98);">"Vu Hoang Lam"</span><span class="token operator" style="color: rgb(215, 58, 73);">&lt;</span>
<span class="token variable">$mail</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token double-quoted-string string" style="color: rgb(3, 47, 98);">"lamvh@live.com"</span><span class="token punctuation">;</span>
<span class="token variable">$age</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token number" style="color: rgb(0, 92, 197);">22</span><span class="token punctuation">;</span>
<span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" style="color: rgb(106, 115, 125);">//Gán những giá trị khác và tiếp tục thực thi</span>
<span class="token variable">$name</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token double-quoted-string string" style="color: rgb(3, 47, 98);">"Nguyen Van A"</span><span class="token punctuation">;</span>
<span class="token variable">$mail</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token double-quoted-string string" style="color: rgb(3, 47, 98);">"nva@live.com"</span><span class="token punctuation">;</span>
<span class="token variable">$age</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token number" style="color: rgb(0, 92, 197);">23</span><span class="token punctuation">;</span>
<span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Như các bạn thấy ta chỉ cần khởi tạo Prepared Statement một lần và có thể sử dụng lại nhiều lần. Với mỗi column - placeholder ta phải thực hiện gán tham số một lần, điều này sẽ không sao với những table có ít column như ví dụ trên, nhưng sẽ rất bất tiện nếu bảng có nhiều table, rất may mắn ta có cách khác để làm việc này, đó là lưu toàn bộ giá trị vào trong một mảng và truyền mảng này vào phương thức execute(), cụ thể như sau:</p><pre class="language-PHP" data-filename="" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; margin-top: 1em; margin-bottom: 1em; color: rgb(36, 41, 46); line-height: 1.45; direction: ltr; word-break: normal; tab-size: 4; hyphens: none; padding: 1em; background-color: rgb(241, 242, 243); border-radius: 3px; border: 1px solid rgb(229, 229, 229);"><code class="language-PHP" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; color: rgb(36, 41, 46); display: block; line-height: 1.45; direction: ltr; word-spacing: normal; tab-size: 4; hyphens: none;"><span class="token variable">$stmt</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token variable">$conn</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">prepare</span><span class="token punctuation">(</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'INSERT INTO users (name, email, age) values (?, ?, ?)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$data</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token keyword" style="color: rgb(215, 58, 73);">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'Vu Hoang Lam'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'lamvh@live.com'</span><span class="token punctuation">,</span> <span class="token number" style="color: rgb(0, 92, 197);">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" style="color: rgb(106, 115, 125);">//Phương thức execute() dưới đây sẽ gán lần lượt giá trị trong mảng vào các Placeholder theo thứ tự</span>
<span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">execute</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"><span style="font-weight: bolder;">Named Placeholder</span></p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Đối với Named Placeholder, cách thực hiện cũng khá tương đồng với Unnamed Placeholder, chỉ khác là ta không dùng thứ tự placeholder để gán giá trị (bind) mà dùng chính tên của placeholder:</p><pre class="language-PHP" data-filename="" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; margin-top: 1em; margin-bottom: 1em; color: rgb(36, 41, 46); line-height: 1.45; direction: ltr; word-break: normal; tab-size: 4; hyphens: none; padding: 1em; background-color: rgb(241, 242, 243); border-radius: 3px; border: 1px solid rgb(229, 229, 229);"><code class="language-PHP" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; color: rgb(36, 41, 46); display: block; line-height: 1.45; direction: ltr; word-spacing: normal; tab-size: 4; hyphens: none;"><span class="token comment" style="color: rgb(106, 115, 125);">//Khởi tạo Prepared Statement từ biến $conn ở phần trước</span>
<span class="token variable">$stmt</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token variable">$conn</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">prepare</span><span class="token punctuation">(</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'INSERT INTO users (name, email, age) values (:name, :mail, :age)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" style="color: rgb(106, 115, 125);">//Gán các biến (lúc này chưa mang giá trị) vào các placeholder theo tên của chúng</span>
<span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">bindParam</span><span class="token punctuation">(</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">':name'</span><span class="token punctuation">,</span> <span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">bindParam</span><span class="token punctuation">(</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">':mail'</span><span class="token punctuation">,</span> <span class="token variable">$mail</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">bindParam</span><span class="token punctuation">(</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">':age'</span><span class="token punctuation">,</span> <span class="token variable">$age</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" style="color: rgb(106, 115, 125);">//Gán giá trị và thực thi</span>
<span class="token variable">$name</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token double-quoted-string string" style="color: rgb(3, 47, 98);">"Vu Hoang Lam"</span><span class="token punctuation">;</span>
<span class="token variable">$mail</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token double-quoted-string string" style="color: rgb(3, 47, 98);">"lamvh@live.com"</span><span class="token punctuation">;</span>
<span class="token variable">$age</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token number" style="color: rgb(0, 92, 197);">22</span><span class="token punctuation">;</span>
<span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Các bạn cũng có thể sử dụng mảng để rút gọn:</p><pre class="language-PHP" data-filename="" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; margin-top: 1em; margin-bottom: 1em; color: rgb(36, 41, 46); line-height: 1.45; direction: ltr; word-break: normal; tab-size: 4; hyphens: none; padding: 1em; background-color: rgb(241, 242, 243); border-radius: 3px; border: 1px solid rgb(229, 229, 229);"><code class="language-PHP" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; color: rgb(36, 41, 46); display: block; line-height: 1.45; direction: ltr; word-spacing: normal; tab-size: 4; hyphens: none;"><span class="token comment" style="color: rgb(106, 115, 125);">//Lưu ý: Không cần thiết phải sử dụng dấu hai chấm cho các key</span>
<span class="token variable">$data</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token keyword" style="color: rgb(215, 58, 73);">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'name'</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'Vu Hoang Lam'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'mail'</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'lamvh@live.com'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'age'</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span> <span class="token number" style="color: rgb(0, 92, 197);">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">M</span>ột mẹo hữu ích khác khi sử dụng Named Placeholder đó là insert Object

<span class="token keyword" style="color: rgb(215, 58, 73);">class</span> <span class="token variable">$user</span>
<span class="token punctuation">{</span>
    <span class="token keyword" style="color: rgb(215, 58, 73);">public</span> <span class="token variable">$name</span><span class="token punctuation">;</span>
    <span class="token keyword" style="color: rgb(215, 58, 73);">public</span> <span class="token variable">$mail</span><span class="token punctuation">;</span>
    <span class="token keyword" style="color: rgb(215, 58, 73);">public</span> <span class="token variable">$age</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token variable">$person</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token keyword" style="color: rgb(215, 58, 73);">new</span> <span class="token variable">$user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$person</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token property" style="color: rgb(3, 47, 98);">name</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'Vu Hoang Lam'</span><span class="token punctuation">;</span>
<span class="token variable">$person</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token property" style="color: rgb(3, 47, 98);">mail</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'lamvh@live.com'</span><span class="token punctuation">;</span>
<span class="token variable">$person</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token property" style="color: rgb(3, 47, 98);">age</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token number" style="color: rgb(0, 92, 197);">22</span><span class="token punctuation">;</span>

<span class="token variable">$stmt</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token variable">$conn</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">prepare</span><span class="token punctuation">(</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'INSERT INTO users (name, email, age) values (:name, :mail, :age)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">execute</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword" style="color: rgb(215, 58, 73);">array</span><span class="token punctuation">)</span><span class="token variable">$person</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Ở dòng cuối cùng, tôi đã thực hiện "ép kiểu" (cast) Object $person thành array để truyền vào phương thức execute();</p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Việc sử dụng Prepared Statement sẽ giúp bạn tránh được SQL Injection, tôi sẽ đi sâu giải thích vấn đề này trong một bài viết khác.</p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"><span style="font-weight: bolder;">4. Select Data - "Đọc" dữ liệu từ database</span></p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Khi đọc dữ liệu từ database, PDO sẽ trả về dữ liệu theo cấu trúc mảng (array) hoặc đối tượng (object) thông qua phương thức fetch(). Bạn nên thiết lập trước cấu trúc dữ liệu trước khi gọi phương thức này, PDO hỗ trợ các tuỳ chọn sau:</p><ul style="margin-bottom: 0px; margin-top: 1em; color: rgb(41, 43, 44); font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 18px;"><li style="font-size: 1em; word-break: break-word; overflow-wrap: break-word; margin-bottom: 0.5em;">PDO::FETCH_ASSOC: Trả về dữ liệu dạng mảng với key là tên của column (column của các table trong database)</li><li style="font-size: 1em; word-break: break-word; overflow-wrap: break-word; margin-bottom: 0.5em;">PDO::FETCH_BOTH (default): Trả về dữ liệu dạng mảng với key là tên của column và cả số thứ tự của column</li><li style="font-size: 1em; word-break: break-word; overflow-wrap: break-word; margin-bottom: 0.5em;">PDO::FETCH_BOUND: Gán giá trị của từng column cho từng biến đã khởi tạo trước đó qua phương thức bindColumn()</li><li style="font-size: 1em; word-break: break-word; overflow-wrap: break-word; margin-bottom: 0.5em;">PDO::FETCH_CLASS: Gán giá trị của từng column cho từng thuộc tính (property/attribute) của một lớp Class theo tên column và tên thuộc tính.</li><li style="font-size: 1em; word-break: break-word; overflow-wrap: break-word; margin-bottom: 0.5em;">PDO::FETCH_INTO: Gán giá trị của từng column cho từng thuộc tính của một Class Instance (thể hiện của một lớp)</li><li style="font-size: 1em; word-break: break-word; overflow-wrap: break-word; margin-bottom: 0.5em;">PDO::FETCH_LAZY: Gộp chung PDO::FETCH_BOTH/PDO::FETCH_OBJ</li><li style="font-size: 1em; word-break: break-word; overflow-wrap: break-word; margin-bottom: 0.5em;">PDO::FETCH_NUM: Trả về dữ liệu dạng mảng với key là số thứ tự của column</li><li style="font-size: 1em; word-break: break-word; overflow-wrap: break-word; margin-bottom: 0.5em;">PDO::FETCH_OBJ: Trả về một Object của stdClass (link is external) với tên thuộc tính của Object là tên của column.</li></ul><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Trong thực tế, chúng ta chỉ thường dùng 3 kiểu fetch đó là: FETCH_ASSOC, FETCH_CLASS và FETCH_OBJ. Để thiết lập cấu trúc dữ liệu (Fetch Style hay Fetch Mode) trước khi fetch ta dùng câu lệnh sau:</p><pre class="language-PHP" data-filename="" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; margin-top: 1em; margin-bottom: 1em; color: rgb(36, 41, 46); line-height: 1.45; direction: ltr; word-break: normal; tab-size: 4; hyphens: none; padding: 1em; background-color: rgb(241, 242, 243); border-radius: 3px; border: 1px solid rgb(229, 229, 229);"><code class="language-PHP" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; color: rgb(36, 41, 46); display: block; line-height: 1.45; direction: ltr; word-spacing: normal; tab-size: 4; hyphens: none;"><span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">setFetchMode</span><span class="token punctuation">(</span><span class="token constant">PDO</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">FETCH_ASSOC</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Hoặc nếu muốn bạn cũng có thể thiết lập kiểu fetch khi gọi hàm fetch():</p><pre class="language-PHP" data-filename="" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; margin-top: 1em; margin-bottom: 1em; color: rgb(36, 41, 46); line-height: 1.45; direction: ltr; word-break: normal; tab-size: 4; hyphens: none; padding: 1em; background-color: rgb(241, 242, 243); border-radius: 3px; border: 1px solid rgb(229, 229, 229);"><code class="language-PHP" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; color: rgb(36, 41, 46); display: block; line-height: 1.45; direction: ltr; word-spacing: normal; tab-size: 4; hyphens: none;"><span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">fetch</span><span class="token punctuation">(</span><span class="token constant">PDO</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">FETCH_ASSOC</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"><span style="font-weight: bolder;">FETCH_ASSOC</span></p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Kiểu fetch này sẽ tạo ra một mảng kết hợp lập chỉ mục theo tên column (nghĩa là các key của mảng chính là tên của column), tương tự như khi ta dùng MySQL/MySQLi Extension.</p><pre class="language-PHP" data-filename="" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; margin-top: 1em; margin-bottom: 1em; color: rgb(36, 41, 46); line-height: 1.45; direction: ltr; word-break: normal; tab-size: 4; hyphens: none; padding: 1em; background-color: rgb(241, 242, 243); border-radius: 3px; border: 1px solid rgb(229, 229, 229);"><code class="language-PHP" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; color: rgb(36, 41, 46); display: block; line-height: 1.45; direction: ltr; word-spacing: normal; tab-size: 4; hyphens: none;"><span class="token comment" style="color: rgb(106, 115, 125);">//Tạo Prepared Statement</span>
<span class="token variable">$stmt</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token variable">$conn</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">prepare</span><span class="token punctuation">(</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'SELECT email, age from users WHERE name = :name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" style="color: rgb(106, 115, 125);">//Thiết lập kiểu dữ liệu trả về</span>
<span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">setFetchMode</span><span class="token punctuation">(</span><span class="token constant">PDO</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">FETCH_ASSOC</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" style="color: rgb(106, 115, 125);">//Gán giá trị và thực thi</span>
<span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">execute</span><span class="token punctuation">(</span><span class="token keyword" style="color: rgb(215, 58, 73);">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'name'</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" style="color: rgb(106, 115, 125);">//Hiển thị kết quả, vòng lặp sau đây sẽ dừng lại khi đã duyệt qua toàn bộ kết quả</span>
<span class="token keyword" style="color: rgb(215, 58, 73);">while</span><span class="token punctuation">(</span><span class="token variable">$row</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword" style="color: rgb(215, 58, 73);">echo</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'name'</span><span class="token punctuation">]</span> <span class="token punctuation">,</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'\n'</span><span class="token punctuation">;</span>
    <span class="token keyword" style="color: rgb(215, 58, 73);">echo</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'email'</span><span class="token punctuation">]</span> <span class="token punctuation">,</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'\n'</span><span class="token punctuation">;</span>
    <span class="token keyword" style="color: rgb(215, 58, 73);">echo</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'age'</span><span class="token punctuation">]</span> <span class="token punctuation">,</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'\n'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"><span style="font-weight: bolder;">FETCH_OBJ</span></p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Kiểu fetch này trả về một Object của stdClass cho mỗi row của kết quả.</p><pre class="language-PHP" data-filename="" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; margin-top: 1em; margin-bottom: 1em; color: rgb(36, 41, 46); line-height: 1.45; direction: ltr; word-break: normal; tab-size: 4; hyphens: none; padding: 1em; background-color: rgb(241, 242, 243); border-radius: 3px; border: 1px solid rgb(229, 229, 229);"><code class="language-PHP" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; color: rgb(36, 41, 46); display: block; line-height: 1.45; direction: ltr; word-spacing: normal; tab-size: 4; hyphens: none;"><span class="token comment" style="color: rgb(106, 115, 125);">//Tạo Prepared Statement</span>
<span class="token variable">$stmt</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token variable">$conn</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">prepare</span><span class="token punctuation">(</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'SELECT email, age from users WHERE name = :name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" style="color: rgb(106, 115, 125);">//Thiết lập kiểu dữ liệu trả về</span>
<span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">setFetchMode</span><span class="token punctuation">(</span><span class="token constant">PDO</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">FETCH_OBJ</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" style="color: rgb(106, 115, 125);">//Gán giá trị và thực thi</span>
<span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">execute</span><span class="token punctuation">(</span><span class="token keyword" style="color: rgb(215, 58, 73);">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'name'</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" style="color: rgb(106, 115, 125);">//Hiển thị kết quả, vòng lặp sau đây sẽ dừng lại khi đã duyệt qua toàn bộ kết quả trả về</span>
<span class="token keyword" style="color: rgb(215, 58, 73);">while</span><span class="token punctuation">(</span><span class="token variable">$row</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword" style="color: rgb(215, 58, 73);">echo</span> <span class="token variable">$row</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token property" style="color: rgb(3, 47, 98);">name</span> <span class="token punctuation">,</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'\n'</span><span class="token punctuation">;</span>
    <span class="token keyword" style="color: rgb(215, 58, 73);">echo</span> <span class="token variable">$row</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token property" style="color: rgb(3, 47, 98);">email</span> <span class="token punctuation">,</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'\n'</span><span class="token punctuation">;</span>
    <span class="token keyword" style="color: rgb(215, 58, 73);">echo</span> <span class="token variable">$row</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token property" style="color: rgb(3, 47, 98);">age</span> <span class="token punctuation">,</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'\n'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"><span style="font-weight: bolder;">FETCH_CLASS</span></p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Kiểu fetch này cho phép bạn đưa kết quả vào Object của một Class mà bạn chỉ định. Khi sử dụng FETCH_CLASS, thuộc tính của class sẽ được gán giá trị trước khi constructor của class đó được gọi (phải chú ý vì điều này rất quan trọng). Nếu không có thuộc tính khớp với tên của một column bất kỳ thì thuộc tính đó sẽ được tự động tạo ra (public).</p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Giả sử table users có một ta đã có Class User được định nghĩa như sau:</p><pre class="language-PHP" data-filename="" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; margin-top: 1em; margin-bottom: 1em; color: rgb(36, 41, 46); line-height: 1.45; direction: ltr; word-break: normal; tab-size: 4; hyphens: none; padding: 1em; background-color: rgb(241, 242, 243); border-radius: 3px; border: 1px solid rgb(229, 229, 229);"><code class="language-PHP" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; color: rgb(36, 41, 46); display: block; line-height: 1.45; direction: ltr; word-spacing: normal; tab-size: 4; hyphens: none;"><span class="token keyword" style="color: rgb(215, 58, 73);">class</span> <span class="token class-name" style="color: rgb(111, 66, 193);">User</span> <span class="token punctuation">{</span>
    <span class="token keyword" style="color: rgb(215, 58, 73);">public</span> <span class="token variable">$name</span><span class="token punctuation">;</span>
    <span class="token keyword" style="color: rgb(215, 58, 73);">public</span> <span class="token variable">$email</span><span class="token punctuation">;</span>
    <span class="token keyword" style="color: rgb(215, 58, 73);">public</span> <span class="token variable">$isAdmin</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'No'</span><span class="token punctuation">;</span>

    <span class="token keyword" style="color: rgb(215, 58, 73);">function</span> <span class="token function" style="color: rgb(111, 66, 193);">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword" style="color: rgb(215, 58, 73);">if</span> <span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token property" style="color: rgb(3, 47, 98);">name</span> <span class="token operator" style="color: rgb(215, 58, 73);">==</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'Vu Hoang Lam'</span><span class="token punctuation">)</span>
            <span class="token variable">$this</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token property" style="color: rgb(3, 47, 98);">isAdmin</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'Yes'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Khi query data từ database sử dụng đoạn code sau:</p><pre class="language-PHP" data-filename="" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; margin-top: 1em; margin-bottom: 1em; color: rgb(36, 41, 46); line-height: 1.45; direction: ltr; word-break: normal; tab-size: 4; hyphens: none; padding: 1em; background-color: rgb(241, 242, 243); border-radius: 3px; border: 1px solid rgb(229, 229, 229);"><code class="language-PHP" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; color: rgb(36, 41, 46); display: block; line-height: 1.45; direction: ltr; word-spacing: normal; tab-size: 4; hyphens: none;"><span class="token comment" style="color: rgb(106, 115, 125);">//Tạo Prepared Statement</span>
<span class="token variable">$stmt</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token variable">$conn</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">prepare</span><span class="token punctuation">(</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'SELECT email, age from users WHERE name = :name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" style="color: rgb(106, 115, 125);">//Thiết lập kiểu dữ liệu trả về, chỉ định dữ liệu được đưa vào object của class User</span>
<span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">setFetchMode</span><span class="token punctuation">(</span><span class="token constant">PDO</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">FETCH_CLASS</span><span class="token punctuation">,</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'User'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" style="color: rgb(106, 115, 125);">//Gán giá trị và thực thi</span>
<span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">execute</span><span class="token punctuation">(</span><span class="token keyword" style="color: rgb(215, 58, 73);">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'name'</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" style="color: rgb(106, 115, 125);">//Hiển thị kết quả, vòng lặp sau đây sẽ dừng lại khi đã duyệt qua toàn bộ kết quả trả về</span>
<span class="token keyword" style="color: rgb(215, 58, 73);">while</span><span class="token punctuation">(</span><span class="token variable">$obj</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword" style="color: rgb(215, 58, 73);">echo</span> <span class="token variable">$obj</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token property" style="color: rgb(3, 47, 98);">email</span><span class="token punctuation">;</span>
    <span class="token keyword" style="color: rgb(215, 58, 73);">echo</span> <span class="token variable">$obj</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token property" style="color: rgb(3, 47, 98);">isAdmin</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Vì constructor được gọi sau khi thuộc tính $name được gán bằng Vu Hoang Lam nên isAdmin sẽ mang giá trị Yes. Nếu muốn constructor của class được gọi trước khi các thuộc tính được gán giá trị, bạn phải sử dụng thêm PDO::FETCH_PROPS_LATE. Cách sử dụng như sau:</p><pre class="language-PHP" data-filename="" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; margin-top: 1em; margin-bottom: 1em; color: rgb(36, 41, 46); line-height: 1.45; direction: ltr; word-break: normal; tab-size: 4; hyphens: none; padding: 1em; background-color: rgb(241, 242, 243); border-radius: 3px; border: 1px solid rgb(229, 229, 229);"><code class="language-PHP" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; color: rgb(36, 41, 46); display: block; line-height: 1.45; direction: ltr; word-spacing: normal; tab-size: 4; hyphens: none;"><span class="token comment" style="color: rgb(106, 115, 125);">//Hãy thử sử dụng kiểu fetch trên và so sánh kết quả hiển thị</span>
<span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">setFetchMode</span><span class="token punctuation">(</span><span class="token constant">PDO</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">FETCH_CLASS</span> <span class="token operator" style="color: rgb(215, 58, 73);">|</span> <span class="token constant">PDO</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">FETCH_PROPS_LATE</span><span class="token punctuation">,</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'User'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Nếu cần truyền các tham số cho constructor của class thông qua phương thức fetch(), các bạn có thể đặt chúng trong một array theo thứ tự tương ứng cụ thể như sau:</p><pre class="language-PHP" data-filename="" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; margin-top: 1em; margin-bottom: 1em; color: rgb(36, 41, 46); line-height: 1.45; direction: ltr; word-break: normal; tab-size: 4; hyphens: none; padding: 1em; background-color: rgb(241, 242, 243); border-radius: 3px; border: 1px solid rgb(229, 229, 229);"><code class="language-PHP" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; color: rgb(36, 41, 46); display: block; line-height: 1.45; direction: ltr; word-spacing: normal; tab-size: 4; hyphens: none;"><span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">setFetchMode</span><span class="token punctuation">(</span><span class="token constant">PDO</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">FETCH_CLASS</span><span class="token punctuation">,</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'User'</span><span class="token punctuation">,</span> <span class="token keyword" style="color: rgb(215, 58, 73);">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'param1'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'param2'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'param3'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"><span style="font-weight: bolder;">Exceptions - Xử lý ngoại lệ</span></p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">PDO dùng các Exceptions để xử lý các lỗi phát sinh khi làm việc với database, vì thế tất cả những gì bạn làm với PDO nên được đặt trong một try/catch block. PDO cung cấp 3 chế độ xử lý lỗi (Error Mode) được thiết lập thông qua phương thức setAttribute():</p><pre class="language-PHP" data-filename="" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; margin-top: 1em; margin-bottom: 1em; color: rgb(36, 41, 46); line-height: 1.45; direction: ltr; word-break: normal; tab-size: 4; hyphens: none; padding: 1em; background-color: rgb(241, 242, 243); border-radius: 3px; border: 1px solid rgb(229, 229, 229);"><code class="language-PHP" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; color: rgb(36, 41, 46); display: block; line-height: 1.45; direction: ltr; word-spacing: normal; tab-size: 4; hyphens: none;"><span class="token variable">$conn</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">setAttribute</span><span class="token punctuation">(</span> <span class="token constant">PDO</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">ATTR_ERRMODE</span><span class="token punctuation">,</span> <span class="token constant">PDO</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">ERRMODE_SILENT</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$conn</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">setAttribute</span><span class="token punctuation">(</span> <span class="token constant">PDO</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">ATTR_ERRMODE</span><span class="token punctuation">,</span> <span class="token constant">PDO</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">ERRMODE_WARNING</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$conn</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">setAttribute</span><span class="token punctuation">(</span> <span class="token constant">PDO</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">ATTR_ERRMODE</span><span class="token punctuation">,</span> <span class="token constant">PDO</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">ERRMODE_EXCEPTION</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"><span style="font-weight: bolder;">PDO::ERRMODE_SILENT</span></p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Đây là chế độ xử lý lỗi mặc định của PDO, khi gặp mỗt lỗi bất kỳ, PDO sẽ im lặng (silent) và chương trình vẫn tiếp tục chạy. Bạn có thể lấy mã lỗi và thông tin về các lỗi đã xảy ra qua PDO::errorCode() và PDO::errorInfo()</p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"><span style="font-weight: bolder;">PDO::ERRMODE_WARNING</span></p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Ở chế độ này khi gặp phải lỗi PDO sẽ ném ra một PHP Warning, chương trình sẽ tiếp tục chạy.</p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"><span style="font-weight: bolder;">PDO::ERRMODE_EXCEPTION</span></p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Đây là mode mà bạn nên sử dụng nhất, khi đặt trong một try/catch block sẽ giúp bạn kiểm soát các lỗi phát sinh một cách uyển chuyển và giấu các thông báo lỗi có thể khiến Attacker khai thác hệ thống của bạn.</p><pre class="language-PHP" data-filename="" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; margin-top: 1em; margin-bottom: 1em; color: rgb(36, 41, 46); line-height: 1.45; direction: ltr; word-break: normal; tab-size: 4; hyphens: none; padding: 1em; background-color: rgb(241, 242, 243); border-radius: 3px; border: 1px solid rgb(229, 229, 229);"><code class="language-PHP" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; color: rgb(36, 41, 46); display: block; line-height: 1.45; direction: ltr; word-spacing: normal; tab-size: 4; hyphens: none;"><span class="token keyword" style="color: rgb(215, 58, 73);">try</span> <span class="token punctuation">{</span>
    <span class="token variable">$stmt</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token keyword" style="color: rgb(215, 58, 73);">new</span> <span class="token class-name" style="color: rgb(111, 66, 193);">PDO</span><span class="token punctuation">(</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'mysql:host=localhost;dbname=izlearn'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'lamvh'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'talapassday'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">setAttribute</span><span class="token punctuation">(</span> <span class="token constant">PDO</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">ATTR_ERRMODE</span><span class="token punctuation">,</span> <span class="token constant">PDO</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">ERRMODE_EXCEPTION</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" style="color: rgb(106, 115, 125);">//Sai cú pháp, FORM thay vì FROM</span>
    <span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">prepare</span><span class="token punctuation">(</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'SELECT name FORM people'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword" style="color: rgb(215, 58, 73);">catch</span><span class="token punctuation">(</span>PDOException <span class="token variable">$e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword" style="color: rgb(215, 58, 73);">echo</span> <span class="token double-quoted-string string" style="color: rgb(3, 47, 98);">"ERROR! Co loi xay ra voi PDO"</span><span class="token punctuation">;</span>
    <span class="token function" style="color: rgb(111, 66, 193);">file_put_contents</span><span class="token punctuation">(</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'PDOErrors.txt'</span><span class="token punctuation">,</span> <span class="token variable">$e</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">FILE_APPEND</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Đoạn code trên sẽ ghi thông báo lỗi vào một file text với tên PDOErrors.txt</p><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;"><span style="font-weight: bolder;">Một số phương thức hữu ích khác</span></p><pre class="language-PHP" data-filename="" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; margin-top: 1em; margin-bottom: 1em; color: rgb(36, 41, 46); line-height: 1.45; direction: ltr; word-break: normal; tab-size: 4; hyphens: none; padding: 1em; background-color: rgb(241, 242, 243); border-radius: 3px; border: 1px solid rgb(229, 229, 229);"><code class="language-PHP" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; color: rgb(36, 41, 46); display: block; line-height: 1.45; direction: ltr; word-spacing: normal; tab-size: 4; hyphens: none;"><span class="token variable">$conn</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">lastInsertId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Phương thức trên trả về Auto Incremented ID của rows được thêm gần nhất.</p><pre class="language-PHP" data-filename="" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; margin-top: 1em; margin-bottom: 1em; color: rgb(36, 41, 46); line-height: 1.45; direction: ltr; word-break: normal; tab-size: 4; hyphens: none; padding: 1em; background-color: rgb(241, 242, 243); border-radius: 3px; border: 1px solid rgb(229, 229, 229);"><code class="language-PHP" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; color: rgb(36, 41, 46); display: block; line-height: 1.45; direction: ltr; word-spacing: normal; tab-size: 4; hyphens: none;"><span class="token variable">$conn</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">exec</span><span class="token punctuation">(</span><span class="token single-quoted-string string" style="color: rgb(3, 47, 98);">'DELETE FROM users WHERE uid = 1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Đối với các lệnh SQL không có dữ liệu trả về, và không cần thiết phải truyền tham số thì có thể sử dụng phương thức exec(). Phương thức này sẽ trả về số lượng row bị tác động sau khi thực hiện câu lệnh. Như ví dụ trên sẽ trả về số lượng row bị xoá.</p><pre class="language-PHP" data-filename="" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; margin-top: 1em; margin-bottom: 1em; color: rgb(36, 41, 46); line-height: 1.45; direction: ltr; word-break: normal; tab-size: 4; hyphens: none; padding: 1em; background-color: rgb(241, 242, 243); border-radius: 3px; border: 1px solid rgb(229, 229, 229);"><code class="language-PHP" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; color: rgb(36, 41, 46); display: block; line-height: 1.45; direction: ltr; word-spacing: normal; tab-size: 4; hyphens: none;"><span class="token variable">$conn</span> <span class="token operator" style="color: rgb(215, 58, 73);">=</span> <span class="token variable">$DBH</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">quote</span><span class="token punctuation">(</span><span class="token variable">$foo</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Phương thức quote() sẽ giúp bạn thêm dấu nháy cho một string để string đó an toàn khi sử dụng để truy vấn, nếu bạn không muốn sử dụng Prepared Statement.</p><pre class="language-PHP" data-filename="" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; margin-top: 1em; margin-bottom: 1em; color: rgb(36, 41, 46); line-height: 1.45; direction: ltr; word-break: normal; tab-size: 4; hyphens: none; padding: 1em; background-color: rgb(241, 242, 243); border-radius: 3px; border: 1px solid rgb(229, 229, 229);"><code class="language-PHP" style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 15px; color: rgb(36, 41, 46); display: block; line-height: 1.45; direction: ltr; word-spacing: normal; tab-size: 4; hyphens: none;"><span class="token variable">$stmt</span><span class="token operator" style="color: rgb(215, 58, 73);">-</span><span class="token operator" style="color: rgb(215, 58, 73);">&gt;</span><span class="token function" style="color: rgb(111, 66, 193);">rowCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p style="margin-top: 1.5em; margin-bottom: 0px; color: rgb(27, 27, 27); letter-spacing: -0.003em; font-size: 18px; word-break: break-word; overflow-wrap: break-word; font-family: &quot;Open Sans&quot;, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;Helvetica Neue&quot;, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;">Phương thức rowCount() trả về số lượng row bị tác động sau khi thực hiện các thao tác DELETE, INSERT và UPDATE. Dùng rowCount() cho thao tác SELECT có thể sẽ trả về kết quả không đúng với một số loại database.</p>
